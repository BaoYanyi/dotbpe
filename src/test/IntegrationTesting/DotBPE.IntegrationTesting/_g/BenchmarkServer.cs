// Generated by the protocol buffer compiler.  DO NOT EDIT!
// source: benchmark.proto
#region Designer generated code

using System;
using System.Threading.Tasks;
using DotBPE.Rpc;
using DotBPE.Protocol.Amp;
using Google.Protobuf;

namespace DotBPE.IntegrationTesting
{

    //start for class AbstractBenchmarkTest
    public abstract class BenchmarkTestBase : ServiceActorBase
    {
        public override string Id => "50000$0";
        //调用委托
        private async Task ReceiveEchoAsync(IRpcContext<AmpMessage> context, AmpMessage req)
        {
            var request = BenchmarkMessage.Parser.ParseFrom(req.Data);
            var data = await EchoAsync(request);
            var response = AmpMessage.CreateResponseMessage(req.ServiceId, req.MessageId);
            response.Sequence = req.Sequence;
            response.Data = data.ToByteArray();
            await context.SendAsync(response);
        }

        //抽象方法
        public abstract Task<BenchmarkMessage> EchoAsync(BenchmarkMessage request);
        public override Task ReceiveAsync(IRpcContext<AmpMessage> context, AmpMessage req)
        {
            switch (req.MessageId)
            {
                //方法BenchmarkTest.Echo
                case 1: return this.ReceiveEchoAsync(context, req);
                default: return base.ReceiveNotFoundAsync(context, req);
            }
        }
    }
    //end for class AbstractBenchmarkTest
}

#endregion

